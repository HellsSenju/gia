"use strict";var container=document.getElementById("weather-container");function fetchWeather(){var e,n,a,i;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,"https://www.7timer.info/bin/api.pl?lon=48.4&lat=54.3&product=civil&output=json",e="https://corsproxy.io/?"+encodeURIComponent("https://www.7timer.info/bin/api.pl?lon=48.4&lat=54.3&product=civil&output=json"),t.next=6,regeneratorRuntime.awrap(fetch(e));case 6:return n=t.sent,t.next=9,regeneratorRuntime.awrap(n.json());case 9:a=t.sent,i=parseInit(a.init),console.log(i),container.innerHTML="",a.dataseries.forEach(function(t){var e=new Date(i.getTime()+60*t.timepoint*60*1e3);console.log(new Date(i.getTime())),console.log(new Date(i.getTime()+60*t.timepoint*60*1e3));var n=formatDate(e),a=formatTime(e),r="".concat(t.temp2m,"°C"),c=translateWeather(t.weather),o=document.createElement("div");o.className="weather-card",o.innerHTML="\n                <h2>".concat(n,'</h2>\n                <p class="time">').concat(a,'</p>\n                <div class="temp">').concat(r,'</div>\n                <div class="desc">').concat(c,"</div>\n            "),container.appendChild(o)}),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),container.innerHTML="<p>Ошибка загрузки прогноза погоды.</p>",console.error(t.t0);case 21:case"end":return t.stop()}},null,null,[[0,17]])}function parseInit(t){var e=parseInt(t.slice(0,4)),n=parseInt(t.slice(4,6))-1,a=parseInt(t.slice(6,8)),r=parseInt(t.slice(8,10));return new Date(Date.UTC(e,n,a,r))}function formatDate(t){var e=String(t.getUTCDate()).padStart(2,"0"),n=String(t.getUTCMonth()+1).padStart(2,"0"),a=t.getUTCFullYear();return"".concat(e,".").concat(n,".").concat(a)}function formatTime(t){var e=String(t.getUTCHours()).padStart(2,"0"),n=String(t.getUTCMinutes()).padStart(2,"0");return"".concat(e,":").concat(n)}function translateWeather(t){return{clearday:"Ясно",pcloudy:"Малооблачно",mcloudy:"Переменная облачность",cloudy:"Пасмурно",rain:"Дождь",lightrain:"Легкий дождь",snow:"Снег",ts:"Гроза",fog:"Туман"}[t]||"Неизвестно"}fetchWeather();
//# sourceMappingURL=script.min.js.map
